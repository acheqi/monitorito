<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Monitorito</title>

		<!-- Libraries Styles -->
		<link rel="stylesheet" href="lib/jquery-ui-1.11.4/jquery-ui.structure.css">
		<link rel="stylesheet" href="lib/jquery-ui-1.11.4/jquery-ui.theme.css">
		<link rel="stylesheet" href="lib/foundation/css/foundation.min.css">
		<link href="lib/vis/vis.min.css" rel="stylesheet" type="text/css" />
		<!-- Libraries Styles	-->

		<!-- Styles -->
		<link href="styles/main.css" rel="stylesheet" type="text/css" />
		<link href="styles/scrollbar.css" rel="stylesheet" type="text/css" />
		<link href="styles/loader.css" rel="stylesheet" type="text/css" />
		<link href="styles/ribbon.css" rel="stylesheet" type="text/css" />
		<!-- Styles -->

		<!-- Libraries -->
		<script src="lib/jquery-1.10.2/jquery.js"></script>
		<script src="lib/jquery-throttle/jquery-throttle.js"></script>
		<script src="lib/jquery-slidereveal/jquery-slidereveal.min.js"></script>
		<script src="lib/jquery-ui-1.11.4/jquery-ui.min.js"></script>
		<script src="lib/uri/URI.js"></script>
		<script src="lib/vis/vis.min.js"></script>
		<script src="lib/chart/chart.min.js"></script>
		<script src="lib/filesaver/FileSaver.min.js"></script>
		<!-- Libraries -->

		<script src="scripts/util/Util.js"></script>
		<script src="scripts/ui/InterfaceHandler.js"></script>
		<script src="scripts/ui/ManipulationWidgetHandler.js"></script>
		<script src="scripts/ui/ClusterWidgetHandler.js"></script>
		<script src="scripts/ui/NodeWidgetHandler.js"></script>
		<script src="scripts/ui/EdgeWidgetHandler.js"></script>
		<script src="scripts/ui/ControlWidgetHandler.js"></script>
		<script src="scripts/ui/SideWidgetHandler.js"></script>
		<script src="scripts/ui/ModeWidgetHandler.js"></script>

		<script src="scripts/persistence/browser/chrome/ChromeStorageService.js"></script>
		<script src="scripts/persistence/download/Downloader.js"></script>
		<script src="scripts/persistence/conversion/Converter.js"></script>

		<script src="scripts/network/Session.js"></script>
		<script src="scripts/network/HttpRequest.js"></script>
		<script src="scripts/network/Redirect.js"></script>
		<script src="scripts/monitor/browser/EventSource.js"></script>
		<script src="scripts/monitor/browser/chrome/ChromeEventSource.js"></script>
		<script src="scripts/monitor/MonitoringService.js"></script>

		<script src="scripts/graph/core/Node.js"></script>
		<script src="scripts/graph/core/DomainNode.js"></script>
		<script src="scripts/graph/core/ResourceNode.js"></script>
		<script src="scripts/graph/core/Edge.js"></script>
		<script src="scripts/graph/core/DomainEdge.js"></script>
		<script src="scripts/graph/core/ResourceEdge.js"></script>
		<script src="scripts/graph/Graph.js"></script>
		<script src="scripts/graph/GraphFactory.js"></script>
		<script src="scripts/graph/GraphHandler.js"></script>
		<script src="scripts/graph/vis/VisualisationNetwork.js"></script>
		<script src="scripts/graph/statistics/GraphStatsCalculator.js"></script>
		<script src="scripts/graph/statistics/NodeMetricsCalculator.js"></script>
		<script src="scripts/graph/statistics/StatisticsHolder.js"></script>
		<script src="scripts/graph/statistics/NodeMetric.js"></script>
		<script src="scripts/graph/statistics/NodeMetricsFactory.js"></script>
		<script src="scripts/graph/cluster/Cluster.js"></script>
		<script src="scripts/graph/cluster/ClusteringEngine.js"></script>
		<script src="scripts/graph/explore/ResourcesExplorerEngine.js"></script>
		<script src="scripts/graph/filter/FilterOptions.js"></script>
		<script src="scripts/graph/filter/FilteringEngine.js"></script>

		<script src="scripts/bootstrap.js"></script>
		<script src="scripts/controller/CentralController.js"></script>
	</head>

	<body>
		<div id="main-container" class="row" >
			<div id="graph" class="columns large-9 medium-9">
			</div>
			<div id="ribbon">
				<span>Filtered Graph</span>
			</div>

			<div class="columns large-3 medium-3">
				<div class="row">
					<div class="columns large-offset-1 large-11">

						<div id="control_widget" class="row">
							<div class="columns large-12">
								<div class="row" id="monitoring-switch-container">
									<div class="columns small-4 large-4">Monitoring</div>
									<div class="columns small-8 large-8">
										<div class="switch tiny">
											<input checked class="switch-input" id="monitoring-switch" type="checkbox" name="monitor">
											<label class="switch-paddle" for="monitoring-switch">
												<span class="switch-active" aria-hidden="true">Yes</span>
												<span class="switch-inactive" aria-hidden="true">No</span>
											</label>
										</div>
									</div>
								</div>
							</div>

							<div class="columns large-12">
								<div class="row" id="physics-switch-container">
									<div class="columns small-4 large-4">Physics</div>
									<div class="columns small-8 large-8">
										<div class="switch tiny">
											<input checked class="switch-input" id="physics-switch" type="checkbox" name="physics">
											<label class="switch-paddle" for="physics-switch">
												<span class="switch-active" aria-hidden="true">Yes</span>
												<span class="switch-inactive" aria-hidden="true">No</span>
											</label>
										</div>
									</div>
								</div>
							</div>

							<div id="export-data-button" class="button small warning">
								Export Data
							</div>
							<div id="export-graph-button" class="button small warning">
								Export Graph
							</div>
							<div id="reset-data-button" class="button small alert">
								Reset Data
							</div>
						</div>

						<div id="manipulation_widget" class="row">
							<div class="columns large-12">
								<div id="cluster-button" class="button big_font tiny columns large-5">Cluster By Domain</div>
								<div id="decluster_all_button" class="button big_font tiny alert columns large-5">Delete all Clusters</div>
								<div id="cluster-options">
									<div class="callout secondary">
									  	Attention: The cluster will be created based on the existing monitored data. New incoming monitored data will not be integrated in the cluster, they will be visualised in the graph as normal Domain nodes. As a consequence, it is suggested that you cluster your graph, only after you have visited all the required resources. Alternatively, you can delete the cluster and re-create it.
									</div>
									<form>
										<fieldset>
											<legend>Cluster ID/Name</legend>
											<input class="cluster-id" type="text" placeholder="My-Cluster">
										</fieldset>
										<fieldset>
											<legend>Domains</legend>
											<input class="domain" type="text" placeholder="www.example.com">
										</fieldset>
										<div class="add-row-button button tiny secondary">+ Add Domain</div>
									</form>
									<div class="submit-button button tiny success">Cluster</div>
									<div class="cancel-button button tiny secondary">Cancel</div>
								</div>
							</div>
							<div class="columns large-12">
								<div id="filter-button" class="button big_font tiny columns large-5">Filter</div>
								<div id="reset-filter-button" class="button big_font tiny alert columns large-5">Reset Filter</div>
								<div id="filter-options">
									<form>
										<div class="row">
											<div class="callout secondary columns large-12">
												Non-defined parameters will not be used in the filtering.
											</div>
											<h4>Node Attributes</h4>
											<div class="columns large-12">
												<div class="row">
													<div class="columns large-5">
														<label class="right">Regular Expression (to match Domains)</label>
													</div>
													<div class="columns large-7">
														<input name="node-id" type="text" placeholder=".*       (will match all nodes)">
													</div>
												</div>
												<div id="edges-in" class="row">
													<div class="columns large-4">Incoming Edges</div>
													<div class="columns large-4">
														<div class="input-group">
															<span class="input-group-label">Min</span>
															<input name="min" class="input-group-field" type="number" min="0" placeholder="0">
														</div>
													</div>
													<div class="columns large-4">
														<div class="input-group">
															<span class="input-group-label">Max</span>
															<input name="max" class="input-group-field" type="number" min="0">
														</div>
													</div>
												</div>
												<div id="edges-out" class="row">
													<div class="columns large-4">Outgoing Edges</div>
													<div class="columns large-4">
														<div class="input-group">
															<span class="input-group-label">Min</span>
															<input name="min" class="input-group-field" type="number" min="0" placeholder="0">
														</div>
													</div>
													<div class="columns large-4">
														<div class="input-group">
															<span class="input-group-label">Max</span>
															<input name="max" class="input-group-field" type="number" min="0">
														</div>
													</div>
												</div>
											</div>
											<div id="filtering-rules" title="Filtering cannot be applied with invalid values">
												<h4>Valid Values</h4>
												Each field must comply with the following rules, to apply filtering:
												<ul>
													<li>Node ID: A valid Regular Expression String</li>
													<li>Node Edges values (min,max): non-negative integer (>=0)</li>
													<li>Depth: non-negative integer (>=0)</li>
													<li>Metric values (From,To): integer values in range [0,100]</li>
												</ul>
											</div>
										</div>
										<fieldset name="metrics">
											<h4>Node Metrics</h4>
											<fieldset>
												<div class="row">
													<div class="columns large-2 metric-label"></div>
													<div class="columns large-5">
														<div class="input-group">
															<span class="input-group-label">From</span>
															<input name="min" class="input-group-field" type="number">
														</div>
													</div>
													<div class="columns large-5">
														<div class="input-group">
															<span class="input-group-label">To</span>
															<input name="max" class="input-group-field" type="number">
														</div>
													</div>
												</div>
											</fieldset>
										</fieldset>
										<fieldset>
											<h4>Additional Options</h4>
											<div class="row">
												<div class="columns large-8">Show also neighbours of matched nodes at depth:</div>
												<div class="columns large-4">
													<input name="depth" type="number" placeholder="0" min="0">
												</div>
											</div>
										</fieldset>
									</form>
									<div class="submit-button button tiny success">Filter</div>
									<div class="cancel-button button tiny secondary">Cancel</div>
								</div>
							</div>
							<div class="columns large-12">
								<div id="expand_all_button" class="button big_font tiny columns large-5">Expand all Resources</div>
								<div id="colapse_all_button" class="button big_font tiny alert columns large-5">Collapse all Resources</div>
							</div>
						</div>

						<div id="cluster_widget" class="row">
							<div class="row">
								<div class="columns large-12">Selected Cluster</div>
							</div>

							<div class="row">
								<div class="columns large-5 name">Cluster ID</div>
								<div id="cluster_id" class="columns large-7 value"></div>
							</div>
							<div class="row">
								<div class="columns large-5 name">Clustered Nodes</div>
								<div id="cluster_nodes_num" class="columns large-2 value hcenter"></div>
								<div class="columns large-5">
									<div id="cluster_nodes_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="cluster_nodes_dialog" title="Cluster nodes">
									<table>
										<thead>
											<tr>
												<th style="width: 100%">Node Domain</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
							<div class="row">
								<div class="columns large-12">
									<div id="decluster_button" class="button tiny secondary">De-cluster</div>
								</div>
							</div>
						</div>

						<div id="node_widget" class="row">
							<div class="row">
								<div class="columns large-12">Selected Node</div>
							</div>

							<div class="row">
								<div class="columns large-3 name">Location</div>
								<div id="node_id" class="columns large-9 value wrap"></div>
							</div>

							<div class="row">
								<div class="columns large-3 name">Requests </div>
								<div class="columns large-2 value hcenter" id="node_requests_no"></div>
								<div class="columns large-7">
									<div id="node_requests_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="node_requests_dialog" title="Requests URL">
									<table>
										<thead>
											<tr>
												<th style="width: 15%">Type</th>
												<th style="width: 10%">Resource</th>
												<th style="width: 10%">Method</th>
												<th style="width: 25%">URL</th>
												<th style="width: 20%">Referer</th>
												<th style="width: 20%">Body</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
							<div class="row">
								<div class="columns large-3 name">1st-party Cookies</div>
								<div id="node_cookies_1st_no" class="columns large-2 value hcenter"></div>
								<div class="columns large-7">
									<div id="node_cookies_1st_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="node_cookies_1st_dialog" title="1st party cookies">
									<table>
										<thead>
											<tr>
												<th style="width: 50%">Key</th>
												<th style="width: 50%">Value</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
							<div class="row">
								<div class="columns large-3 name">3rd-party Cookies</div>
								<div id="node_cookies_3rd_no" class="columns large-2 value hcenter"></div>
								<div class="columns large-7">
									<div id="node_cookies_3rd_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="node_cookies_3rd_dialog" title="3rd party cookies">
									<table>
										<thead>
											<tr>
												<th style="width: 50%">Key</th>
												<th style="width: 50%">Value</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
							<div id="explorer_panel" class="row">
								<div class="columns large-12">
									<div id="expand_button" class="button small secondary">Expand</div>
									<div id="collapse_button" class="button small secondary">Collapse</div>
								</div>
							</div>
						</div>

						<div id="edge_widget" class="row">
							<div class="row">
								<div class="columns large-12">Selected Edge</div>
							</div>

							<div class="row">
								<div class="columns large-3 name">Type</div>
								<div id="edge_type" class="columns large-9 value"></div>
							</div>

							<div class="row">
								<div class="columns large-3 name">From</div>
								<div id="edge_from" class="columns large-9 value wrap"></div>
							</div>
							<div class="row">
								<div class="columns large-3 name">To</div>
								<div id="edge_to" class="columns large-9 value wrap"></div>
							</div>

							<div class="row">
								<div class="columns large-3 name">Requests </div>
								<div class="columns large-2 value hcenter" id="edge_requests_no"></div>
								<div class="columns large-7">
									<div id="edge_requests_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="edge_requests_dialog" title="Requests URL">
									<table>
										<thead>
											<tr>
												<th style="width: 35%">FROM</th>
												<th style="width: 35%">Url</th>
												<th style="width: 15%">Resource Type</th>
												<th style="width: 15%">Method</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
							<div class="row">
								<div class="columns large-3 name">Redirects </div>
								<div class="columns large-2 value hcenter" id="edge_redirects_no"></div>
								<div class="columns large-7">
									<div id="edge_redirects_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="edge_redirects_dialog" title="Redirects URL">
									<table>
										<thead>
											<tr>
												<th style="width: 50%">FROM</th>
												<th style="width: 50%">TO</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
							<div class="row">
								<div class="columns large-3 name">Referrals </div>
								<div class="columns large-2 value hcenter" id="edge_referrals_no"></div>
								<div class="columns large-7">
									<div id="edge_referrals_opener" class="button tiny secondary">Show</div>
								</div>
								<div id="edge_referrals_dialog" title="Referrals URL">
									<table>
										<thead>
											<tr>
												<th style="width: 50%">FROM</th>
												<th style="width: 35%">Url</th>
												<th style="width: 15%">Resource Type</th>
												<th style="width: 15%">Method</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="side-widget">
				<div id="statistics">
					<h5> Graph Statistics</h5>
					<canvas id="node-types" ></canvas>
					<canvas id="in-edges" ></canvas>
					<canvas id="out-edges" ></canvas>
					<canvas id="node-metrics" ></canvas>
				</div>
				<div id="side-widget-trigger"><img src="resources/img/arrow.png" alt="arrow image"></div>
			</div>

			<div id="mode-dialog">
				<div class="row">
					<div class="columns large-5">
						<div id="online-mode" class="row option">
							<div class="columns large-12 header">Online</div>
							<div class="columns large-12"><img src="resources/img/online.jpg" alt="online image"></div>
							<div class="columns large-12">This mode is more suitable for visualising small datasets (&lt; ~50 websites). If this mode is selected, the real-time visualisation of your data will be enabled and you will also able to export the monitored data in the end.</div>
						</div>
					</div>
					<div class="columns large-offset-1 large-5">
						<div id="offline-mode" class="row option">
							<div class="columns large-12 header">Offline</div>
							<div class="columns large-12"><img src="resources/img/offline.jpg" alt="offline image"></div>
							<div class="columns large-12">This mode is more suitable for visualising large datasets (&gt; ~50 websites). If this mode is selected, the real-time visualisation of your data is disabled to improve performance, but you will be able to export the monitored data in the end.</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div id="loader">
			<div></div>
		</div>
	</body>
</html>